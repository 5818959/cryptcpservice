CryptCPService
===

Сервис для проверки подписи.

Для проверки используется утилита cryptcp.exe (Windows only).


Установка
---

    composer install


Настройка
---

### Файл конфигурации

    cp app/config.php.dist app/config.php

### Папка для временных файлов

    chmod -R 0777 tmp


Команды используемые для проверки
---

1. Присоединённая:

        cryptcp.exe -verify -f <file_with_cert> <file_with_signature> [<file_to_save_signed_data>] [<flags>]

2. Отсоединённая:

        cryptcp.exe -vsignf -f <sign.txt.sgn> <sign.txt> [<flags>]


Использование
---

Сервису необходимо передавать следующие данные:

1. Сертификат.
2. Подписанные данные.
3. Тип подписи:
    - присоединённая;
    - отсоединённая.
4. Дополнительные параметры:
    - не проверять цепочки найденных сертификатов (-nochain);
    - не проверять сертификаты в цепочке на предмет отозванности (-norev);
    - завершать выполнение с ошибкой, если хотя бы один сертификат не прошел проверку (-errchain).
